name: Run
on:
  workflow_run:
    workflows:
      - PR
    types:
      - completed

jobs:
  rules:
    runs-on: ubuntu-latest
    environment: safe
    steps:
      - run: |
          echo "${{toJson(github.event.workflow_run)}}"
      - uses: actions/checkout@v3
      - uses: oven-sh/setup-bun@v1
      - uses: denoland/setup-deno@v1
      - run: bun install --production
      - run: bun run check
        env:
          PR_NUMBER: ${{ github.event.workflow_run.event.pull_request.number }}
          SHA: '${{ github.event.workflow_run.event.pull_request.head.sha }}'
          OTHER: ${{ toJSON(github.event.workflow_run.event.pull_request) }}
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
